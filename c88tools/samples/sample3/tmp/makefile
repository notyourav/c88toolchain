#############################################################
# Makefile generated by WB88 Ver 1.0                        #
#                                                           #
# Caution: Do NOT make any modification into this file.     #
#############################################################

IEEE          = -ieee                                 #IEEE-695
IHEX          = -ihex                                 #Intel Hex
SREC          = -srec                                 #Motorola S record

#------------------------------------#
# GENERAL MACRO DEFINE SECTION       #
#------------------------------------#

FIL88         = C:\EPSON\S1C88\dev\88348\Fil88348.exe #filing utility
SY88          = C:\EPSON\S1C88\bin\Sy88.exe           #symbolic table file generator
ALC88         = C:\EPSON\S1C88\bin\alc88.exe          #Optimizer utility
OUTPUT0       = sample3.out                           #output(linker obj)
OUTPUT1       = sample3.sa                            #output(Motorola S)
OUTPUT2       = sample3.abs                           #output(IEEE-695)
OUTPUT3       = sample3.hex                           #output(Intel hex)
OUTPUT4       = sample3.psa                           #output(psa)
CUR           = C:\EPSON\S1C88\SAMPLES\Sample3
INF           = s1c88348.inf

DSC           = ..\def\s1c88348.dsc                   #locator description files
MEM           = ..\def\s1c88348.mem
CPU           = ..\def\s1c88348.cpu

MODEL         = -Ms                                   #memory model

CCFLAGS       = -g 
ASFLAGS       = -Ta -gs 
LKFLAGS       = 
LCFLAGS       = -M 
OPTINABLE       = 1
#------------------------------------#
# PARTICULAR MACRO DEFINE SECTION    #
#------------------------------------#
#------------------------------------#
# OBJECT FILES SECTION               #
#------------------------------------#
OFILES        = disp.obj \
cstart.obj
WB88USERLIB   = 
#------------------------------------#
# FINAL GOAL DEFINE SECTION          #
#------------------------------------#
.PRECIOUS: $(OUTPUT0)

all : $(OFILES) $(OUTPUT0) $(OUTPUT1) $(OUTPUT2)

$(OUTPUT0)  : $(OFILES)                                 #Link
    $(CC) -cl $(MODEL) -o$@ $(OFILES) $(WB88USERLIB)
ifdef OPTINABLE
	$(exist $(OUTPUT0) $(ALC88) $(CUR) $(OUTPUT0) $(INF) )
	$(exist $*.sa $(FIL88) $*.sa)
else
"$(OUTPUT1)"    : $(OUTPUT0) $(DSC) $(MEM) $(CPU)       #Locate(PSA)
      $(CC) -o$@ $(OUTPUT0) $(DSC) -Tlc"$(LCFLAGS)" \
       $(SREC)
      -$(exist $@ $(FIL88) $@)
      -$(exist $*.map $(SY88) $*.map)

"$(OUTPUT2)"    : $(OUTPUT0) $(DSC) $(MEM) $(CPU)       #Locate(ABS)
       $(CC) -o$@ $(OUTPUT0) $(DSC) -Tlc"$(LCFLAGS)" \
	     $(IEEE)
endif

#------------------------------------#
# BUILD RULES SECTION                #
#------------------------------------#
disp.obj      : ..\src\disp.c \
 ..\src\ascifont.h
	$(CC) $(MODEL) -c ..\src\disp.c -f <<EOF
	$(CCFLAGS)
 EOF
cstart.obj    : ..\src\cstart.c
	$(CC) $(MODEL) -c ..\src\cstart.c -f <<EOF
	$(CCFLAGS)
 EOF

#############################################################
# Caution: Do NOT make any modification into this file.     #
#############################################################
